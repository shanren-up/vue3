!function(a,b){"use strict";var c=(ht.Default,null),d=function(a){return"string"==typeof a||a instanceof String},e=function(){return document},f=function(a){return e().createElement(a)},g=function(){return f("div")},h=function(a,b){a.appendChild(b)},i=function(a,b,c,d){a.addEventListener(b,c,!!d)};ht.widget.FloatingWindow=function(a){var b=this,c=b._view=g(),d=b._contentDiv=g(),e=b._minimizeButton=g();d.style.display="inline-block",d.style.verticalAlign="text-bottom",d.style.position="relative",c.style.position="absolute",c.style.left="0px",c.style.top="0px",c.style.whiteSpace="nowrap",e.style.display="inline-block",e.style.width="23px",e.innerHTML="&nbsp;",e.style.verticalAlign="top",e.style.background="url(minimize.png)",e.style.backgroundSize="cover",c.appendChild(e),c.appendChild(d),a&&b.setContent(a),b.bindingHandleWindowMouseMove=b._handleWindowMouseMove.bind(b),b.bindingHandleWindowMouseUp=b._handleWindowMouseUp.bind(b),i(e,"mousedown",function(a){b._minimizeButtonPosition={x:a.pageX,y:a.pageY}}),i(e,"click",function(a){var c=b._minimizeButtonPosition;a.pageX===c.x&&a.pageY===c.y&&("min"!==b._status?(b._view.style.background="",d.innerHTML="",b._status="min",b._content.iv&&b._content.iv()):(b._status="max",b._view.style.background=b._background,b.setContent(b._content),b._content.iv&&b._content.iv()))}),i(c,"mousedown",function(a){a.stopPropagation(),b._mouseDown=1,b._mousePosition={x:a.pageX,y:a.pageY}}),i(c,"mousewheel",function(a){a.stopPropagation()}),i(c,"mousemove",function(a){a.stopPropagation()})},ht.Default.def("ht.widget.FloatingWindow",Object,{_content:c,_background:"rgb(236, 240, 241)",setBackground:function(a){this._background=a,"min"!==this._status&&(this._view.style.background=this._background)},setContent:function(a){var b=this,c=b._contentDiv;b._content=a,c.innerHTML="",d(a)?c.innerHTML=a:a.getView?h(c,a.getView()):h(c,a)},getView:function(){return this._view},_handleWindowMouseMove:function(a){if(this._mouseDown){var b=this,c=b._mousePosition,d=b._view,e=a.pageX,f=a.pageY,g=e-c.x,h=f-c.y,i=parseInt(d.style.left),j=parseInt(d.style.top),i=i+g,j=j+h;0>i&&(i=0),0>j&&(j=0),i+this._view.offsetWidth>this._parent.clientWidth&&(i=this._parent.clientWidth-this._view.offsetWidth),j+this._view.offsetHeight>this._parent.clientHeight&&(j=this._parent.clientHeight-this._view.offsetHeight),d.style.left=i+"px",d.style.top=j+"px",b._mousePosition={x:e,y:f}}},_handleWindowMouseUp:function(a){this._mouseDown=0,this._mousePosition=c},hide:function(a){this._view&&(this._view.style.display="none")},show:function(a){this._view&&(this._view.style.display="block",this._content.iv&&this._content.iv())},addTo:function(b){var c=this;c._parent=b,b.appendChild(c._view),a.addEventListener("mousemove",c.bindingHandleWindowMouseMove),a.addEventListener("mouseup",c.bindingHandleWindowMouseUp),c.setBackground(c._background)},dispose:function(){this._view&&(this._parent.removeChild(this._view),this._parent=null,this._view=null,a.removeEventListener("mousemove",this.bindingHandleWindowMouseMove),a.removeEventListener("mouseup",this.bindingHandleWindowMouseUp))}})}(this);
/*!最后修改于： 2015-12-08 */