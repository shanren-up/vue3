!function(U,j,s){"use strict";var M="ht",r=U[M],X=null,p=Math,J=p.abs,t=p.max,h=Number.MAX_VALUE,v=r.Default,Q=v.getInternal(),Z=v.clone,G=Q.vec3TransformMat4,d=Q.appendArray,u=function(){var n=/v( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,N=/vt( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,C=/vn( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,U=/f( +\d+)( +\d+)( +\d+)( +\d+)?/,Y=/f( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))?/,r=/f( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))?/,$=/f( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))?/,M=function(B,f){return f=parseInt(f),f>=0?B[f-1]:B[f+B.length]},u=function(N,O,u,I,e,J){if(N.vs){var F=M(O,I),n=M(O,e),R=M(O,J),t=u.matrix,U=N.vs;if(u.flipFace){var z=n;n=R,R=z}t?(d(U,G(Z(F),t)),d(U,G(Z(n),t)),d(U,G(Z(R),t))):(d(U,F),d(U,n),d(U,R))}},V=function(N,P,G,c,t,f){if(N.vs){var Q=M(P,c),A=M(P,t),_=M(P,f),B=G.flipY;if(G.flipFace){var r=A;A=_,_=r}N.uv.push(Q[0],B?1-Q[1]:Q[1],A[0],B?1-A[1]:A[1],_[0],B?1-_[1]:_[1])}},f=function(K,Y,b,t,J,i){if(K.vs){var c=M(Y,t),I=M(Y,J),k=M(Y,i),B=b.normalMatrix,e=K.ns;if(b.flipFace){var N=I;I=k,k=N}B?(d(e,G(Z(c),B)),d(e,G(Z(I),B)),d(e,G(Z(k),B))):(d(e,c),d(e,I),d(e,k))}},l=function(h,t,O,Q,p,L,T,K){var l=Q&&Q.length&&K;L[3]===s?(u(h,t,p,L[0],L[1],L[2]),T&&V(h,O,p,T[0],T[1],T[2]),l&&f(h,Q,p,K[0],K[1],K[2])):(u(h,t,p,L[0],L[1],L[3]),u(h,t,p,L[1],L[2],L[3]),T&&(V(h,O,p,T[0],T[1],T[3]),V(h,O,p,T[1],T[2],T[3])),l&&(f(h,Q,p,K[0],K[1],K[3]),f(h,Q,p,K[1],K[2],K[3])))},R=function(l,i,K,L){var C,D,F,f,Z,P,c,T=h,$=h,n=h,v=-h,m=-h,r=-h;for(C in l)for(P=l[C].vs,c=P.length,D=0;c>D;D+=3)F=P[D+0],f=P[D+1],Z=P[D+2],T>F&&(T=F),$>f&&($=f),n>Z&&(n=Z),F>v&&(v=F),f>m&&(m=f),Z>r&&(r=Z);if(K){var u=T+(v-T)/2,p=$+(m-$)/2,z=n+(r-n)/2;for(C in l)for(P=l[C].vs,c=P.length,D=0;c>D;D+=3)P[D+0]-=u,P[D+1]-=p,P[D+2]-=z}var y,O,H;K?(y=v-T,O=m-$,H=r-n):(y=2*t(J(T),J(v)),O=2*t(J($),J(m)),H=2*t(J(n),J(r))),L.rawS3=[y,O,H];for(C in l){if(P=l[C].vs,i)for(c=P.length,D=0;c>D;D+=3)y&&(P[D+0]/=y),O&&(P[D+1]/=O),H&&(P[D+2]/=H);l[C].rawS3=L.rawS3}};return function(f,h,A){if(!f)return X;Q.isString(h)&&(h=e(h)),A||(A={}),A.flipY==X&&(A.flipY=!0),(A.s3||A.r3||A.t3||A.mat)&&(A.matrix=Q.createWorldMatrix(A.mat,A.s3,A.r3,A.rotationMode,A.t3));var T,H,w,G,d,c,D=[],J=[],j=A.ignoreNormal?X:[],z=A.reverseFlipMtls,b={vs:[],uv:[],ns:j?[]:X},K={htdefault:b},W=f.split("\n"),Z=0;for(j&&A.matrix&&(A.normalMatrix=Q.createNormalMatrix(A.matrix));Z<W.length;Z++)if(H=W[Z].trim(),0!==H.length&&"#"!==H.charAt(0))if(w=n.exec(H))D.push([parseFloat(w[1]),parseFloat(w[2]),parseFloat(w[3])]);else if(w=N.exec(H))J.push([parseFloat(w[1]),parseFloat(w[2])]);else if(j&&(w=C.exec(H)))A.flipFace?j.push([parseFloat(-w[1]),parseFloat(-w[2]),parseFloat(-w[3])]):j.push([parseFloat(w[1]),parseFloat(w[2]),parseFloat(w[3])]);else if(w=U.exec(H))l(b,D,J,j,A,[w[1],w[2],w[3],w[4]]);else if(w=Y.exec(H))l(b,D,J,j,A,[w[2],w[5],w[8],w[11]],[w[3],w[6],w[9],w[12]]);else if(w=r.exec(H))l(b,D,J,j,A,[w[2],w[6],w[10],w[14]],[w[3],w[7],w[11],w[15]],[w[4],w[8],w[12],w[16]]);else if(w=$.exec(H))l(b,D,J,j,A,[w[2],w[5],w[8],w[11]],X,[w[3],w[6],w[9],w[12]]);else if(/^usemtl /.test(H)&&(G=H.substring(7).trim(),!(b=K[G]))){if(b={name:G,vs:[],uv:[],ns:j?[]:X},A.ignoreMtls&&A.ignoreMtls.indexOf(G)>=0&&delete b.vs,(A.reverseFlip||"*"===z||z&&z.indexOf(G)>=0)&&(b.reverseFlip=!0),h&&(d=h[G],d&&(A.ignoreColor||(b.color=d.kd),!A.ignoreTransparent&&d.d>0&&d.d<1&&(b.transparent=!0,b.opacity=d.d),!A.ignoreImage&&(c=d.map_kd)))){for(c=c.split(" "),T=0;T<c.length;T++)"-o"===c[T]?(b.uvOffset=[parseFloat(c[T+1]),parseFloat(c[T+2])],T+=2):"-s"===c[T]&&(b.uvScale=[parseFloat(c[T+1]),parseFloat(c[T+2])],T+=2);b.image=(A.prefix||"")+c[c.length-1]}K[G]=b}var F=[];for(var x in K){var O=K[x].vs;O&&0!==O.length||F.push(x)}F.forEach(function(y){delete K[y]}),R(K,A.cube,A.center,A);var m=A.shape3d;if(m){var p=[];for(var G in K){var b=K[G];p.rawS3=b.rawS3,p.push(b)}v.setShape3dModel(m,p)}return K}}(),e=function(I){var h={};if(I)for(var x,M,c,T,b,L,i=I.split("\n"),k=/\s+/,l=0;l<i.length;l++)M=i[l].trim(),0!==M.length&&"#"!==M.charAt(0)&&(c=M.indexOf(" "),T=(c?M.substring(0,c):M).toLowerCase(),b=(c?M.substring(c+1):"").trim(),"newmtl"===T?h[b]=x={name:b}:x&&("ka"===T||"kd"===T||"ks"===T?(L=b.split(k,3),x[T]=[parseFloat(L[0]),parseFloat(L[1]),parseFloat(L[2]),1]):x[T]="ns"===T||"d"===T?parseFloat(b):b));return h},Y=function(T,f,y){if(T){var t=new XMLHttpRequest;t.onload=function(F){y(F.target.responseText)},t.onerror=function(){y(null)},t.open("GET",T,f),t.send(null)}else y(null)};Q.addMethod(v,{loadObj:function(a,h,H){H=H||{};var W=!H.sync;Y(h,W,function(I){Y(a,W,function(w){var e,y=H.shape3d,m=u(w,I,H);if(m)if(y)e=v.getShape3dModel(y);else{e=[];for(var U in m){var W=m[U];e.rawS3=W.rawS3,e.push(W)}}H.finishFunc&&H.finishFunc(m,e,e.rawS3)})})},parseObj:function(Y,Q,$){return u(Y,Q,$)}})}(this,Object);