!function(W){"use strict";var c="ht",w=W[c],E=w.Default,p=Math,P=(p.PI,p.sin,p.cos,p.atan2,p.sqrt,p.max),R=p.floor,u=(p.round,p.ceil),j=w.Shape,Q=(w.Edge,w.List),l=w.Style,s=w.graph,D=E.getInternal(),b=D.ui(),_=null,I="prototype",o=W.clearInterval,M=W.setInterval,g=function(D){var f=D.data,N=this.dm();if(f&&"add"===D.kind){var d=N.$1c,_=f instanceof j?"shape.":"edge.";d&&f.s(_+"dash.flow")&&d.indexOf(f)<0&&d.push(f)}"clear"===D.kind&&(N.$1c=[])},$=function(C){var J=C.property,_=C.data,B=C.newValue,g=this.dm().$1c,$=_ instanceof j?"s:shape.dash.flow":"s:edge.dash.flow";if(g&&J===$)if(B)g.indexOf(_)<0&&g.push(_);else for(var I=g.length,l=0;I>l;l++)if(g[l]===_){g.splice(l,1);break}},X=s.GraphView[I],r=b.EdgeUI[I],K=b.ShapeUI[I],Z=K._80o,q=r._80o,y=w.DataModel[I],V=y.prepareRemove,Y=X.setDataModel;l["edge.dash.flow.step"]==_&&(l["edge.dash.flow.step"]=3),l["shape.dash.flow.step"]==_&&(l["shape.dash.flow.step"]=3),y.prepareRemove=function(n){V.call(this,n);var a=n._dataModel,Y=a.$1c;if(Y)for(var O=Y.length,D=0;O>D;D++)if(Y[D]===n){Y.splice(D,1);break}},X.setDataModel=function(f){var K=this,Z=K._dataModel;if(Z!==f){Z&&(Z.umm(g,K),Z.umd($,K),Z.$1c=[]),f.mm(g,K),f.md($,K);var r=f.$1c=[];f.each(function(W){var R=W instanceof j?"shape.":"edge.";W.s(R+"dash.flow")&&r.indexOf(W)<0&&r.push(W)}),Y.call(K,f)}},X.setDashFlowInterval=function(J){var z=this,H=z.$2c;z.$2c=J,z.fp("dashFlowInterval",H,J),z.$3c!=_&&(o(z.$3c),delete z.$3c,z.enableDashFlow(J))},X.getDashFlowInterval=function(){return this.$2c},X.$4c=function(){var o,p,g,v=this,G=v.tx(),k=v.ty(),U=v._zoom,L=v.getWidth(),d=v.getHeight(),B={x:-G/U,y:-k/U,width:L/U,height:d/U},s=v.dm().$1c,t=v._56I,w=new Q;if(s.forEach(function(Q){t[Q.getId()]&&(o=v.getDataUI(Q),o&&(g=o._79o(),g&&w.add(g)))}),0!==w.size()&&(w.each(function(X){E.intersectsRect(B,X)&&(p=E.unionRect(p,X))}),p&&(p&&(E.grow(p,P(1,1/U)),p.x=R(p.x*U)/U,p.y=R(p.y*U)/U,p.width=u(p.width*U)/U,p.height=u(p.height*U)/U,p=E.intersection(B,p)),p))){var M=v._canvas.getContext("2d");M.save(),M.lineCap=E.lineCap,M.lineJoin=E.lineJoin,D.translateAndScale(M,G,k,U),M.beginPath(),M.rect(p.x,p.y,p.width,p.height),M.clip(),M.clearRect(p.x,p.y,p.width,p.height),v.$5c(M,p),M.restore()}},X.$5c=function(b,i){var h,M,c=this;c._93db(b),c.each(function(Z){c._56I[Z._id]&&(h=c.getDataUI(Z),h&&(M=h._79o(),(!i||E.intersectsRect(i,M))&&(h.$7c=!0,h._42(b),delete h.$7c)))}),c._92db(b)},X.enableDashFlow=function(K){var n=this;n.$3c==_&&(n.$3c=M(function(){n.$4c()},K||n.$2c||50))},X.disableDashFlow=function(){var T=this;o(T.$3c),delete T.$3c};var H=function(){var q=this,n=q._data,C=n instanceof j?"shape.":"edge.",b=n.s(C+"dash.pattern"),G=n.s(C+"dash.flow.reverse");if(b&&n.s(C+"dash")&&n.s(C+"dash.flow")&&q.$7c){var m=q.s(C+"dash.offset")||0,g=n.s(C+"dash.flow.step"),J=n.getStyleMap(),d=0;b.forEach(function(i){d+=i}),G&&(g=-g),m-=g,m%=d,J||(n._styleMap=J={}),J[C+"dash.offset"]=m}};r._80o=function(d){q.call(this,d),H.call(this)},K._80o=function(Q){Z.call(this,Q),H.call(this)}}(this,Object);