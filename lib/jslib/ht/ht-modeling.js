!function(S,P,j){"use strict";var E="ht",G=S[E],x=null,X=Math,t=X.PI,W=X.cos,g=X.sin,M=X.abs,_=X.max,V=X.sqrt,u=1e-5,l=G.Default,h=l.def,e=l.startAnim,T=l.createMatrix,$=l.transformVec,i=l.getInternal(),I=i.addMethod,L=i.superCall,F=i.toPointsArray,s=i.createNormals,O=i.toFloatArray,c=i.glMV,p=i.batchShape,f=i.createNodeMatrix,R=i.getFaceInfo,m=i.transformAppend,Q=i.drawFaceInfo,U=i.createAnim,o=i.cube(),A=o.is,d=o.vs,Y=o.uv,D=i.ui(),q=G.Node,N=G.Shape,H="h",Z="v",w="front",b="back",y="left",J="right",B="top",k="bottom",a="dw.expanded",r=".expanded",z="dw.angle",C=".angle",n=function(H,W,x){h(E+"."+H,W,x)},K=function(z,t,Q){Q?z.push(t.x,t.y):z.push(t.x,t.y,t.z)},v=[1,0,0],ph=function(C,d,k,W){var t,U,L,K,c=0,z=[];if(W)for(t=W.length;t>c;c+=3)U=W[c],L=W[c+1],K=W[c+2],z.push(new Uh([new $p([d[3*U],d[3*U+1],d[3*U+2]],v,k?[k[2*U],k[2*U+1],0]:x),new $p([d[3*L],d[3*L+1],d[3*L+2]],v,k?[k[2*L],k[2*L+1],0]:x),new $p([d[3*K],d[3*K+1],d[3*K+2]],v,k?[k[2*K],k[2*K+1],0]:x)],C));else for(t=d.length;t>c;c+=3)U=c,L=c+1,K=c+2,z.push(new Uh([new $p([d[3*U],d[3*U+1],d[3*U+2]],v,k?[k[2*U],k[2*U+1],0]:x),new $p([d[3*L],d[3*L+1],d[3*L+2]],v,k?[k[2*L],k[2*L+1],0]:x),new $p([d[3*K],d[3*K+1],d[3*K+2]],v,k?[k[2*K],k[2*K+1],0]:x)],C));return z},Np=[y,w,J,b,B,k],Go=Np.concat("csg"),es=[0,6,12,18,24,30],Co=function(h,m,F){for(var S=f(h),O=[],p=0;6>p;p++)for(var I=Np[p],J=es[p],D=F?m.getFaceUv(h,I):x,U=F?m.getFaceUvScale(h,I):x,X=F?m.getFaceUvOffset(h,I):x,G=0;2>G;G++){var g,M,b,i=A[J+3*G],l=A[J+3*G+1],e=A[J+3*G+2];if(F){if(D){var t=8*p;g=[D[2*i-t],D[2*i+1-t],0],M=[D[2*l-t],D[2*l+1-t],0],b=[D[2*e-t],D[2*e+1-t],0]}else g=[Y[2*i],Y[2*i+1],0],M=[Y[2*l],Y[2*l+1],0],b=[Y[2*e],Y[2*e+1],0];U&&(g[0]*=U[0],g[1]*=U[1],M[0]*=U[0],M[1]*=U[1],b[0]*=U[0],b[1]*=U[1]),X&&(g[0]+=X[0],g[1]+=X[1],M[0]+=X[0],M[1]+=X[1],b[0]+=X[0],b[1]+=X[1])}O.push(new Uh([new $p($([d[3*i],d[3*i+1],d[3*i+2]],S),v,g),new $p($([d[3*l],d[3*l+1],d[3*l+2]],S),v,M),new $p($([d[3*e],d[3*e+1],d[3*e+2]],S),v,b)],h))}return xm.$15n(O)},km=function(M,J){var P,w=M.data.getAttaches();if(w&&w.each(function(j){j instanceof df&&j.s("attach.operation")&&(P||(P=[]),P.push(j))}),P){var _;Np.forEach(function(v){var r=ph(v,M[v].vs,M[v].tuv);_=_?_.concat(r):r}),_=xm.$15n(_),P.forEach(function(S){var e=S.s("attach.operation");_[e]&&(_=_[e](Co(S,M.gv,M.csg.tuv)))}),Np.forEach(function(q){q=M[q],q.vs=[],q.tuv&&(q.tuv=[])}),_.$19n().forEach(function(o){var p=o.$10n;if(p instanceof df){if(p.s("attach.cull"))return;p="csg"}for(var s=M[p],v=s.vs,X=s.tuv,k=o.$9n,R=2;R<k.length;R++)K(v,k[0].$24n),K(v,k[R-1].$24n),K(v,k[R].$24n),X&&(K(X,k[0].uv,!0),K(X,k[R-1].uv,!0),K(X,k[R].uv,!0))})}Go.forEach(function(X){var c=M[X];c.visible&&c.vs.length?(c.ns=s(c.vs),O(c,"vs"),O(c,"tuv")):delete M[X]}),J&&(p(M,x,J),M.clear())};I(l,{createFrameModel:function(i,n,c,v){i=i==x?.07:i,n=n==x?i:n,c=c==x?i:c,v=v?v:{};var C=v.top,e=v.bottom,o=v.left,a=v.right,X=v.front,p=v.back,B=[],k=[];return X===!0?(B.push(-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5),k.push(0,0,0,1,1,1,1,1,1,0,0,0)):X===!1||(B.push(-.5,.5,.5,-.5,-.5,.5,-.5+i,-.5,.5,-.5+i,-.5,.5,-.5+i,.5,.5,-.5,.5,.5,.5-i,.5,.5,.5-i,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5-i,.5,.5,-.5+i,.5,.5,-.5+i,.5-n,.5,.5-i,.5-n,.5,.5-i,.5-n,.5,.5-i,.5,.5,-.5+i,.5,.5,-.5+i,-.5+n,.5,-.5+i,-.5,.5,.5-i,-.5,.5,.5-i,-.5,.5,.5-i,-.5+n,.5,-.5+i,-.5+n,.5),k.push(0,0,0,1,i,1,i,1,i,0,0,0,1-i,0,1-i,1,1,1,1,1,1,0,1-i,0,i,0,i,n,1-i,n,1-i,n,1-i,0,i,0,i,1-n,i,1,1-i,1,1-i,1,1-i,1-n,i,1-n)),p===!0?(B.push(-.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5),k.push(1,0,0,1,1,1,0,1,1,0,0,0)):p===!1||(B.push(-.5,.5,-.5,-.5+i,-.5,-.5,-.5,-.5,-.5,-.5+i,-.5,-.5,-.5,.5,-.5,-.5+i,.5,-.5,.5-i,.5,-.5,.5,-.5,-.5,.5-i,-.5,-.5,.5,-.5,-.5,.5-i,.5,-.5,.5,.5,-.5,-.5+i,.5,-.5,.5-i,.5-n,-.5,-.5+i,.5-n,-.5,.5-i,.5-n,-.5,-.5+i,.5,-.5,.5-i,.5,-.5,-.5+i,-.5+n,-.5,.5-i,-.5,-.5,-.5+i,-.5,-.5,.5-i,-.5,-.5,-.5+i,-.5+n,-.5,.5-i,-.5+n,-.5),k.push(1,0,1-i,1,1,1,1-i,1,1,0,1-i,0,i,0,0,1,i,1,0,1,i,0,0,0,1-i,0,i,n,1-i,n,i,n,1-i,0,i,0,1-i,1-n,i,1,1-i,1,i,1,1-i,1-n,i,1-n)),o===!0?(B.push(-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5),k.push(0,0,0,1,1,1,1,1,1,0,0,0)):o===!1||(B.push(-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5+c,-.5,-.5,-.5+c,-.5,.5,-.5+c,-.5,.5,-.5,-.5,.5,.5-c,-.5,-.5,.5-c,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5-c,-.5,.5,-.5+c,-.5,.5-n,-.5+c,-.5,.5-n,.5-c,-.5,.5-n,.5-c,-.5,.5,.5-c,-.5,.5,-.5+c,-.5,-.5+n,-.5+c,-.5,-.5,-.5+c,-.5,-.5,.5-c,-.5,-.5,.5-c,-.5,-.5+n,.5-c,-.5,-.5+n,-.5+c),k.push(0,0,0,1,c,1,c,1,c,0,0,0,1-c,0,1-c,1,1,1,1,1,1,0,1-c,0,c,0,c,n,1-c,n,1-c,n,1-c,0,c,0,c,1-n,c,1,1-c,1,1-c,1,1-c,1-n,c,1-n)),a===!0?(B.push(.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,-.5,.5,.5,.5),k.push(1,0,0,1,1,1,0,1,1,0,0,0)):a===!1||(B.push(.5,.5,-.5,.5,-.5,-.5+c,.5,-.5,-.5,.5,-.5,-.5+c,.5,.5,-.5,.5,.5,-.5+c,.5,.5,.5-c,.5,-.5,.5,.5,-.5,.5-c,.5,-.5,.5,.5,.5,.5-c,.5,.5,.5,.5,.5,-.5+c,.5,.5-n,.5-c,.5,.5-n,-.5+c,.5,.5-n,.5-c,.5,.5,-.5+c,.5,.5,.5-c,.5,-.5+n,-.5+c,.5,-.5,.5-c,.5,-.5,-.5+c,.5,-.5,.5-c,.5,-.5+n,-.5+c,.5,-.5+n,.5-c),k.push(1,0,1-c,1,1,1,1-c,1,1,0,1-c,0,c,0,0,1,c,1,0,1,c,0,0,0,1-c,0,c,n,1-c,n,c,n,1-c,0,c,0,1-c,1-n,c,1,1-c,1,c,1,1-c,1-n,c,1-n)),C===!0?(B.push(.5,.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5),k.push(1,1,1,0,0,0,0,0,0,1,1,1)):C===!1||(B.push(.5,.5,.5,.5,.5,-.5,.5-i,.5,-.5,.5-i,.5,-.5,.5-i,.5,.5,.5,.5,.5,-.5+i,.5,.5,-.5+i,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5+i,.5,.5,.5-i,.5,.5,.5-i,.5,.5-c,-.5+i,.5,.5-c,-.5+i,.5,.5-c,-.5+i,.5,.5,.5-i,.5,.5,.5-i,.5,-.5+c,.5-i,.5,-.5,-.5+i,.5,-.5,-.5+i,.5,-.5,-.5+i,.5,-.5+c,.5-i,.5,-.5+c),k.push(1,1,1,0,1-i,0,1-i,0,1-i,1,1,1,i,1,i,0,0,0,0,0,0,1,i,1,1-i,1,1-i,1-c,i,1-c,i,1-c,i,1,1-i,1,1-i,c,1-i,0,i,0,i,0,i,c,1-i,c)),e===!0?(B.push(.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5),k.push(1,0,0,1,1,1,0,1,1,0,0,0)):e===!1||(B.push(.5,-.5,.5,.5-i,-.5,-.5,.5,-.5,-.5,.5-i,-.5,-.5,.5,-.5,.5,.5-i,-.5,.5,-.5+i,-.5,.5,-.5,-.5,-.5,-.5+i,-.5,-.5,-.5,-.5,-.5,-.5+i,-.5,.5,-.5,-.5,.5,.5-i,-.5,.5,-.5+i,-.5,.5-c,.5-i,-.5,.5-c,-.5+i,-.5,.5-c,.5-i,-.5,.5,-.5+i,-.5,.5,.5-i,-.5,-.5+c,-.5+i,-.5,-.5,.5-i,-.5,-.5,-.5+i,-.5,-.5,.5-i,-.5,-.5+c,-.5+i,-.5,-.5+c),k.push(1,0,1-i,1,1,1,1-i,1,1,0,1-i,0,i,0,0,1,i,1,0,1,i,0,0,0,1-i,0,i,c,1-i,c,i,c,1-i,0,i,0,1-i,1-c,i,1,1-i,1,i,1,1-i,1-c,i,1-c)),{vs:B,uv:k}}}),I(G.Style,{"dw.flip":!1,"dw.s3":[.999,.999,.5],"dw.t3":j,"dw.expanded":!1,"dw.toggleable":!0,"dw.axis":"left","dw.start":0,"dw.end":t/2,"dw.angle":0,"attach.cull":!1,"attach.operation":"subtract"},!0),Np.forEach(function(N){var F={};F[N+r]=!1,F[N+".toggleable"]=!1,F[N+".axis"]=y,F[N+".start"]=0,F[N+".end"]=t/2,F[N+C]=0,I(G.Style,F,!0)});var xm=function(){this.$4n=[]};xm.$15n=function(Q){var m=new xm;return m.$4n=Q,m},xm.prototype={clone:function(){var E=new xm;return E.$4n=this.$4n.map(function(s){return s.clone()}),E},$19n:function(){return this.$4n},union:function(M){var c=new $f(this.clone().$4n),n=new $f(M.clone().$4n);return c.$3n(n),n.$3n(c),n.$6n(),n.$3n(c),n.$6n(),c.$7n(n.$2n()),xm.$15n(c.$2n())},subtract:function(L){var u=new $f(this.clone().$4n),w=new $f(L.clone().$4n);return u.$6n(),u.$3n(w),w.$3n(u),w.$6n(),w.$3n(u),w.$6n(),u.$7n(w.$2n()),u.$6n(),xm.$15n(u.$2n())},intersect:function(b){var C=new $f(this.clone().$4n),d=new $f(b.clone().$4n);return C.$6n(),d.$3n(C),d.$6n(),C.$3n(d),d.$3n(C),C.$7n(d.$2n()),C.$6n(),xm.$15n(C.$2n())},inverse:function(){var e=this.clone();return e.$4n.map(function(l){l.flip()}),e}},xm.cube=function(T){T=T||{};var e=new cg(T.center||[0,0,0]),x=T.radius?T.radius.length?T.radius:[T.radius,T.radius,T.radius]:[1,1,1];return xm.$15n([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(M){return new Uh(M[0].map(function(W){var H=new cg(e.x+x[0]*(2*!!(1&W)-1),e.y+x[1]*(2*!!(2&W)-1),e.z+x[2]*(2*!!(4&W)-1));return new $p(H,new cg(M[1]))}))}))},xm.sphere=function(q){function c(e,k){e*=2*t,k*=t;var U=new cg(W(e)*g(k),W(k),g(e)*g(k));v.push(new $p(F.$20n(U.$21n(A)),U))}q=q||{};for(var v,F=new cg(q.center||[0,0,0]),A=q.radius||1,a=q.slices||16,h=q.stacks||8,z=[],w=0;a>w;w++)for(var H=0;h>H;H++)v=[],c(w/a,H/h),H>0&&c((w+1)/a,H/h),h-1>H&&c((w+1)/a,(H+1)/h),c(w/a,(H+1)/h),z.push(new Uh(v));return xm.$15n(z)},xm.cylinder=function(v){function L(L,O,m){var x=2*O*t,u=r.$21n(W(x)).$20n($.$21n(g(x))),X=V.$20n(e.$21n(L)).$20n(u.$21n(y)),P=u.$21n(1-M(m)).$20n(Q.$21n(m));return new $p(X,P)}v=v||{};for(var V=new cg(v.start||[0,-1,0]),z=new cg(v.end||[0,1,0]),e=z.$13n(V),y=v.radius||1,O=v.slices||16,Q=e.$14n(),u=M(Q.y)>.5,r=new cg(u,!u,0).$12n(Q).$14n(),$=r.$12n(Q).$14n(),c=new $p(V,Q.$11n()),E=new $p(z,Q.$14n()),a=[],I=0;O>I;I++){var i=I/O,o=(I+1)/O;a.push(new Uh([c,L(0,i,-1),L(0,o,-1)])),a.push(new Uh([L(0,o,0),L(0,i,0),L(1,i,0),L(1,o,0)])),a.push(new Uh([E,L(1,o,1),L(1,i,1)]))}return xm.$15n(a)};var cg=function(D,L,W){var h=this;3==arguments.length?(h.x=D,h.y=L,h.z=W):"x"in D?(h.x=D.x,h.y=D.y,h.z=D.z):(h.x=D[0],h.y=D[1],h.z=D[2])};cg.prototype={clone:function(){return new cg(this.x,this.y,this.z)},$11n:function(){return new cg(-this.x,-this.y,-this.z)},$20n:function(U){return new cg(this.x+U.x,this.y+U.y,this.z+U.z)},$13n:function(G){return new cg(this.x-G.x,this.y-G.y,this.z-G.z)},$21n:function(b){return new cg(this.x*b,this.y*b,this.z*b)},$16n:function(P){return new cg(this.x/P,this.y/P,this.z/P)},$23n:function(B){return this.x*B.x+this.y*B.y+this.z*B.z},lerp:function(s,x){return this.$20n(s.$13n(this).$21n(x))},length:function(){return V(this.$23n(this))},$14n:function(){return this.$16n(this.length())},$12n:function(y){var U=this;return new cg(U.y*y.z-U.z*y.y,U.z*y.x-U.x*y.z,U.x*y.y-U.y*y.x)}};var $p=function(L,V,O){var u=this;u.$24n=new cg(L),u.$22n=new cg(V),u.uv=O?new cg(O):null};$p.prototype={clone:function(){var F=this;return new $p(F.$24n.clone(),F.$22n.clone(),F.uv?F.uv.clone():null)},flip:function(){this.$22n=this.$22n.$11n()},$18n:function(T,s){var G=this;return new $p(G.$24n.lerp(T.$24n,s),G.$22n.lerp(T.$22n,s),G.uv?G.uv.lerp(T.uv,s):null)}};var ps=function(S,F){this.$22n=S,this.w=F};ps.$17n=function(g,l,U){var R=l.$13n(g).$12n(U.$13n(g)).$14n();return new ps(R,R.$23n(g))},ps.prototype={clone:function(){return new ps(this.$22n.clone(),this.w)},flip:function(){var z=this;z.$22n=z.$22n.$11n(),z.w=-z.w},$5n:function(O,e,w,a,p){for(var c=this,s=0,t=1,H=2,v=3,E=0,W=[],h=0;h<O.$9n.length;h++){var m=c.$22n.$23n(O.$9n[h].$24n)-c.w,b=-u>m?H:m>u?t:s;E|=b,W.push(b)}switch(E){case s:(c.$22n.$23n(O.$8n.$22n)>0?e:w).push(O);break;case t:a.push(O);break;case H:p.push(O);break;case v:for(var Y=[],R=[],h=0;h<O.$9n.length;h++){var A=(h+1)%O.$9n.length,q=W[h],L=W[A],I=O.$9n[h],f=O.$9n[A];if(q!=H&&Y.push(I),q!=t&&R.push(q!=H?I.clone():I),(q|L)==v){var m=(c.w-this.$22n.$23n(I.$24n))/c.$22n.$23n(f.$24n.$13n(I.$24n)),G=I.$18n(f,m);Y.push(G),R.push(G.clone())}}Y.length>=3&&a.push(new Uh(Y,O.$10n)),R.length>=3&&p.push(new Uh(R,O.$10n))}}};var Uh=function($,F){var G=this;G.$9n=$,G.$10n=F,G.$8n=ps.$17n($[0].$24n,$[1].$24n,$[2].$24n)};Uh.prototype={clone:function(){var K=this.$9n.map(function(r){return r.clone()});return new Uh(K,this.$10n)},flip:function(){this.$9n.reverse().map(function(D){D.flip()}),this.$8n.flip()}};var $f=function(y){var P=this;P.$8n=null,P.front=null,P.back=null,P.$4n=[],y&&P.$7n(y)};$f.prototype={clone:function(){var o=this,e=new $f;return e.$8n=o.$8n&&o.$8n.clone(),e.front=o.front&&o.front.clone(),e.back=o.back&&o.back.clone(),e.$4n=o.$4n.map(function(W){return W.clone()}),e},$6n:function(){for(var F=this,O=0;O<F.$4n.length;O++)F.$4n[O].flip();F.$8n.flip(),F.front&&F.front.$6n(),F.back&&F.back.$6n();var $=F.front;F.front=F.back,F.back=$},$1n:function($){var V=this;if(!V.$8n)return $.slice();for(var p=[],z=[],F=0;F<$.length;F++)V.$8n.$5n($[F],p,z,p,z);return V.front&&(p=V.front.$1n(p)),z=V.back?V.back.$1n(z):[],p.concat(z)},$3n:function(F){var I=this;I.$4n=F.$1n(I.$4n),I.front&&I.front.$3n(F),I.back&&I.back.$3n(F)},$2n:function(){var p=this,K=p.$4n.slice();return p.front&&(K=K.concat(p.front.$2n())),p.back&&(K=K.concat(p.back.$2n())),K},$7n:function(Y){var c=this;if(Y.length){c.$8n||(c.$8n=Y[0].$8n.clone());for(var U=[],b=[],T=0;T<Y.length;T++)this.$8n.$5n(Y[T],c.$4n,c.$4n,U,b);U.length&&(c.front||(c.front=new $f),this.front.$7n(U)),b.length&&(c.back||(c.back=new $f),c.back.$7n(b))}}};var Cl="symbol",nr=G.Symbol=function(t,c,R){var o=this;L(nr,o),o.s3(20,20,20),o.s({"all.visible":!1,shape:"rect"}),o.setIcon(t,c,R)};n("Symbol",q,{setIcon:function(j,L,T){var S,U=this;return nr.superClass.setIcon.call(U,j),j?(S={for3d:!0,face:"center",position:44,names:[j]},T&&(S.transaprent=!0),L&&(S.autorotate=L),U.addStyleIcon(Cl,S)):U.removeStyleIcon(Cl),U.setWidth(i.getImageWidth(l.getImage(j),U)||20),S}});var df=G.CSGNode=function(){L(df,this),this.s({shape:"rect","attach.thickness":1.001})},Lc={position:1,width:1,height:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,tall:1,elevation:1,"s:attach.cull":1,"s:attach.operation":1};n("CSGNode",q,{_22Q:function(){return Td},onPropertyChanged:function(l){var j=this,T=j.getHost();df.superClass.onPropertyChanged.call(j,l),Lc[l.property]&&(T instanceof Bb||T instanceof df)&&T.fp("csgNodeChange",!0,!1)}});var Td=function(k,m){L(Td,this,[k,m])};h(Td,D.Node3dUI,{_80o:function(f,K,x){var k=this;k._shape3d?Td.superClass._80o.call(k,f,K,x):(c(k.gv),Go.forEach(function(S){Q(k,f,K,k[S],x)}))},validate:function(T,$){var y=this,o=y.gv,q=y.data;if(q.s("shape3d"))return Td.superClass.validate.call(y,T,$),y._shape3d=!0,void 0;y._shape3d=!1;var B=f(q,o.getMat(q)),F=T&&T.uv;y.vf2("csg",F);for(var D=0;6>D;D++)for(var c=Np[D],P=es[D],M=y.vf2(c,F,$),g=M.mat||B,S=M.vs,b=M.uv,j=M.tuv,H=0;2>H;H++){var X=A[P+3*H],v=A[P+3*H+1],K=A[P+3*H+2];if(m(S,g,[d[3*X],d[3*X+1],d[3*X+2]]),m(S,g,[d[3*v],d[3*v+1],d[3*v+2]]),m(S,g,[d[3*K],d[3*K+1],d[3*K+2]]),j)if(b){var u=8*D;j.push(b[2*X-u],b[2*X+1-u],b[2*v-u],b[2*v+1-u],b[2*K-u],b[2*K+1-u])}else j.push(Y[2*X],Y[2*X+1],Y[2*v],Y[2*v+1],Y[2*K],Y[2*K+1])}km(y,T,$)},vf2:function(m,S,v){var H,g=this,z=g.gv.getFaceVisible(g.data,m);return H=R(g,m,v),H.vs=[],H.tuv=z&&(H.texture||S)?[]:x,H.visible=z,H}});var Bb=G.CSGShape=function(){var J=this;L(Bb,J),J.s({"shape.background":x,"shape.border.width":8}),J.setTall(240),J.setElevation(120),J.setThickness(14)};n("CSGShape",N,{IRotatable:!1,_22Q:function(){return md},setRotationX:function(){},setRotation:function(){},setRotationZ:function(){},setSegments:function(){}});var md=function(_,i){L(md,this,[_,i])};h(md,D.Shape3dUI,{_80o:function(C,K,y){var k=this;k.undrawable||(c(k.gv),Go.forEach(function(Y){Q(k,C,K,k[Y],y)}))},validate:function(G,b){var w=this,o=w.data,q=o.getPoints();if(w.undrawable=q.size()<2)return w.clear(),void 0;var k=o.isClosePath(),U=_(o._thickness/2,u),I=F(q,x,x,k);Go.forEach(function(C){w.vf(C,G&&G.uv,!0,b)}),k&&(w.left.visible=!1,w.right.visible=!1),w._12O(I,U),w._20Q(I),km(w,G,b)}});var Mp=G.DoorWindow=function(){var B=this;L(Mp,B),B.setElevation(100),B.s3(100,200,14)};n("DoorWindow",df,{IDoorWindow:!0,toggle:function(W){this.setExpanded(!this.s(a),W)},isExpanded:function(){return this.s(a)},setExpanded:function(i,O){var q,h=this,f=h.$25n,K=h.getDataModel(),g=h.s(a);if(K&&(q=K.getHistoryManager()),f&&(f.stop(!0),delete h.$25n),g!==i){q&&q.beginInteraction();var T=i?h.s("dw.end"):h.s("dw.start");h.s(a,i),O=U(O),O?(g=h.s(z),O.action=function(A){h.s(z,g+(T-g)*A)},O.finishFunc=function(){q&&q.endInteraction()},h.$25n=e(O)):(h.s(z,T),q&&q.endInteraction())}},getMat:function(){var C=this,o=C.s("dw.s3"),R=C.s("dw.t3"),l=C.s("dw.flip"),D=C.s(z);if(o||D||R||l){var X=[];if(l&&X.push({r3:[0,t,0]}),o&&X.push({s3:o}),D){o=C.s3();var W=C.s("dw.axis"),r=o[0]/2,I=o[1]/2;o[2]/2,W===y?X.push({t3:[r,0,0]},{r3:[0,-D,0]},{t3:[-r,0,0]}):W===J?X.push({t3:[-r,0,0]},{r3:[0,D,0]},{t3:[r,0,0]}):W===B?X.push({t3:[0,-I,0]},{r3:[-D,0,0]},{t3:[0,I,0]}):W===k?X.push({t3:[0,I,0]},{r3:[D,0,0]},{t3:[0,-I,0]}):W===Z?X.push({r3:[0,D,0]}):W===H&&X.push({r3:[D,0,0]})}return R&&X.push({t3:R}),T(X)}return x}});var ae=G.CSGBox=function(){var e=this;L(ae,e),e.setElevation(100),e.s3(100,200,100)};n("CSGBox",df,{ICSGBox:!0,toggleFace:function(w,q){this.setFaceExpanded(w,!this.s(w+r),q)},isFaceExpanded:function(m){return this.s(m+r)},setFaceExpanded:function(L,b,T){var k=this,O=k.$25n,j=k.s(L+r);if(O&&(O.stop(!0),delete k.$25n),j!==b){var f=b?k.s(L+".end"):k.s(L+".start");k.s(L+r,b),T=U(T),T?(j=k.s(L+C),T.action=function(Y){k.s(L+C,j+(f-j)*Y)},k.$25n=e(T)):k.s(L+C,f)}},getFaceMat:function(c){var i=this,z=i.s(c+C);if(!z)return x;var h=i.s(c+".axis"),X=i.s3(),W=X[0]/2,a=X[1]/2,e=X[2]/2,q=[];return c===w&&(h===y?q.push({t3:[W,0,-e]},{r3:[0,-z,0]},{t3:[-W,0,e]}):h===J?q.push({t3:[-W,0,-e]},{r3:[0,z,0]},{t3:[W,0,e]}):h===B?q.push({t3:[0,-a,-e]},{r3:[-z,0,0]},{t3:[0,a,e]}):h===k?q.push({t3:[0,a,-e]},{r3:[z,0,0]},{t3:[0,-a,e]}):h===Z?q.push({t3:[0,0,-e]},{r3:[0,z,0]},{t3:[0,0,e]}):h===H&&q.push({t3:[0,0,-e]},{r3:[z,0,0]},{t3:[0,0,e]})),c===b&&(h===y?q.push({t3:[-W,0,e]},{r3:[0,-z,0]},{t3:[W,0,-e]}):h===J?q.push({t3:[W,0,e]},{r3:[0,z,0]},{t3:[-W,0,-e]}):h===B?q.push({t3:[0,-a,e]},{r3:[z,0,0]},{t3:[0,a,-e]}):h===k?q.push({t3:[0,a,e]},{r3:[-z,0,0]},{t3:[0,-a,-e]}):h===Z?q.push({t3:[0,0,e]},{r3:[0,z,0]},{t3:[0,0,-e]}):h===H&&q.push({t3:[0,0,e]},{r3:[z,0,0]},{t3:[0,0,-e]})),c===y&&(h===y?q.push({t3:[W,0,e]},{r3:[0,-z,0]},{t3:[-W,0,-e]}):h===J?q.push({t3:[W,0,-e]},{r3:[0,z,0]},{t3:[-W,0,e]}):h===B?q.push({t3:[W,-a,0]},{r3:[0,0,-z]},{t3:[-W,a,0]}):h===k?q.push({t3:[W,a,0]},{r3:[0,0,z]},{t3:[-W,-a,0]}):h===Z?q.push({t3:[W,0,0]},{r3:[0,z,0]},{t3:[-W,0,0]}):h===H&&q.push({t3:[W,0,0]},{r3:[0,0,z]},{t3:[-W,0,0]})),c===J&&(h===y?q.push({t3:[-W,0,-e]},{r3:[0,-z,0]},{t3:[W,0,e]}):h===J?q.push({t3:[-W,0,e]},{r3:[0,z,0]},{t3:[W,0,-e]}):h===B?q.push({t3:[-W,-a,0]},{r3:[0,0,z]},{t3:[W,a,0]}):h===k?q.push({t3:[-W,a,0]},{r3:[0,0,-z]},{t3:[W,-a,0]}):h===Z?q.push({t3:[-W,0,0]},{r3:[0,z,0]},{t3:[W,0,0]}):h===H&&q.push({t3:[-W,0,0]},{r3:[0,0,z]},{t3:[W,0,0]})),c===B&&(h===y?q.push({t3:[W,-a,0]},{r3:[0,0,z]},{t3:[-W,a,0]}):h===J?q.push({t3:[-W,-a,0]},{r3:[0,0,-z]},{t3:[W,a,0]}):h===B?q.push({t3:[0,-a,e]},{r3:[-z,0,0]},{t3:[0,a,-e]}):h===k?q.push({t3:[0,-a,-e]},{r3:[z,0,0]},{t3:[0,a,e]}):h===Z?q.push({t3:[0,-a,0]},{r3:[0,0,z]},{t3:[0,a,0]}):h===H&&q.push({t3:[0,-a,0]},{r3:[z,0,0]},{t3:[0,a,0]})),c===k&&(h===y?q.push({t3:[W,a,0]},{r3:[0,0,-z]},{t3:[-W,-a,0]}):h===J?q.push({t3:[-W,a,0]},{r3:[0,0,z]},{t3:[W,-a,0]}):h===B?q.push({t3:[0,a,-e]},{r3:[-z,0,0]},{t3:[0,-a,e]}):h===k?q.push({t3:[0,a,e]},{r3:[z,0,0]},{t3:[0,-a,-e]}):h===Z?q.push({t3:[0,a,0]},{r3:[0,0,z]},{t3:[0,-a,0]}):h===H&&q.push({t3:[0,a,0]},{r3:[z,0,0]},{t3:[0,-a,0]})),T(q)}})}(this,Object);